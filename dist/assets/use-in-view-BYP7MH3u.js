import{a as o,r as n}from"./index-DsX8Z_-a.js";const t={some:0,all:1};function r(r,{root:e,margin:i,amount:a,once:s=!1,initial:u=!1}={}){const[c,f]=n.useState(u);return n.useEffect(()=>{if(!r.current||s&&c)return;const n={root:e&&e.current||void 0,margin:i,amount:a};return function(n,r,{root:e,margin:i,amount:a="some"}={}){const s=o(n),u=new WeakMap,c=new IntersectionObserver(o=>{o.forEach(o=>{const n=u.get(o.target);if(o.isIntersecting!==Boolean(n))if(o.isIntersecting){const n=r(o.target,o);"function"==typeof n?u.set(o.target,n):c.unobserve(o.target)}else"function"==typeof n&&(n(o),u.delete(o.target))})},{root:e,rootMargin:i,threshold:"number"==typeof a?a:t[a]});return s.forEach(o=>c.observe(o)),()=>c.disconnect()}(r.current,()=>(f(!0),s?void 0:()=>f(!1)),n)},[e,r,i,s,a]),c}export{r as u};
